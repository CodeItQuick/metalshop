<!doctype html>
<html>
	<head>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width,initial-scale=1"/>
		<title>metalshop</title>
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Big+Shoulders+Text|Dosis&display=swap"/>
		<link rel="stylesheet" href="demo.css"/>
		<script type="importmap-shim" src="dist/importmap.json"></script>
		<script type="module-shim" src="dist/main.js"></script>
		<script async defer src="https://unpkg.com/es-module-shims@0.4.6/dist/es-module-shims.js"></script>

		<!-- metalshop config -->
		<metalshop-config
			mock
			auth-server="https://auth.metalback.chasemoskal.com"
			profile-server="https://profile.metalback.chasemoskal.com"
		></metalshop-config>

		<script>
			~function() {
				const config = document.querySelector("metalshop-config")
				const mode = s => location.search.includes(s)
				const set = (key, value) => config.setAttribute(key, value)

				// ?dev, ?dev=k8s, ?dev=node
				if (mode("dev")) {
					if (mode("dev=k8s")) {
						set("auth-server", "https://auth.metaldev.chasemoskal.com")
						set("profile-server", "https://profile.metaldev.chasemoskal.com")
					}
					else {
						set("auth-server", "http://auth.metaldev.chasemoskal.com:8000")
						set("profile-server", "http://profile.metaldev.chasemoskal.com:8001")
					}
				}

				// ?mock, ?mock=loggedin, ?mock=admin
				if (mode("mock")) {
					config.removeAttribute("auth-server")
					config.removeAttribute("profile-server")
					set("mock",
						mode("mock=loggedin")
							? "loggedin"
							: mode("mock=admin")
								? "admin"
								: mode("mock=premium")
									? "premium"
									: ""
					)
				}
			}()
		</script>
	</head>
	<body>
		<header>
			<h1>metalshop</h1>
			<menu-system sticky initially-hidden>
				<menu-display>

					<!-- metalshop ui components -->
					<user-avatar slot="button" title="Your Account"></user-avatar>
					<user-panel>
						<h2 slot="top">Your account</h2>
						<profile-panel></profile-panel>
						<paywall-panel></paywall-panel>
					</user-panel>

				</menu-display>
			</menu-system>
		</header>
		<main class="content">
			<section>
				<h2>ready-made app components and microservices</h2>
				<p>see <em><a href="https://github.com/chase-moskal/metalshop">metalshop on github</a></em></p>

				<br/>
				<p>the default page supports real logins on the azure cluster</p>
				<ul>
					<li><a href="/">/ — connect to production servers</a></li>
				</ul>

				<br/>
				<p>you can also play in mock mode, where no real connections or logins are made</p>
				<ul>
					<li><a href="/?mock">/?mock — no connections</a></li>
					<li><a href="/?mock=loggedin">/?mock=loggedin — start logged in</a></li>
					<li><a href="/?mock=premium">/?mock=premium — be a premium user</a></li>
					<li><a href="/?mock=admin">/?mock=admin — be an administrator</a></li>
				</ul>

				<br/>
				<p>developers, you can use dev mode to connect elsewhere</p>
				<ul>
					<li><a href="/?dev=node">/?dev=node — local node microservices</a></li>
					<li><a href="/?dev=k8s">/?dev=k8s — local minikube cluster</a></li>
				</ul>
			</section>

			<details>
				<summary>questions-board</summary>
				<questions-board board-name="qa1" initially-hidden>
						<h2 slot="post">Post your question!</h2>
						<h2 slot="rate">Rate other submitted questions</h2>
				</questions-board>
			</details>

			<details>
				<summary>schedule-countdown</summary>
				<schedule-countdown key="countdown1" initially-hidden>
					<h2>Next stream scheduled</h2>
				</schedule-countdown>
			</details>

			<details>
				<summary>video-viewer</summary>
				<video-viewer video-name="livestream" initially-hidden>
					<h2>Welcome to the private livestream!</h2>
					<p>You are logged in as a premium supporter</p>
				</video-viewer>
			</details>

		</main>
	</body>
</html>
